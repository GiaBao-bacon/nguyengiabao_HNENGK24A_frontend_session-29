<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quản Lý Sản Phẩm</title>
  </head>
  <body>
    <script>
      let products = [];

      function addProduct() {
        let id = +prompt("Mời bạn nhập id sản phẩm:");
        let name = prompt("Mời bạn nhập tên sản phẩm:");
        let price = +prompt("Mời bạn nhập giá sản phẩm:");
        let category = prompt("Mời bạn nhập danh mục sản phẩm:");
        let quantity = +prompt("Mời bạn nhập số lượng sản phẩm:");
        products.push({ id, name, price, category, quantity });
        alert("Sản phẩm đã được thêm thành công!");
      }

      function deleteProduct() {
        let id = +prompt("Mời bạn nhập id sản phẩm cần xóa:");
        let index = products.findIndex((product) => product.id === id);
        if (index !== -1) {
          products.splice(index, 1);
          alert("Sản phẩm đã được xóa thành công!");
        } else {
          alert("Không tìm thấy sản phẩm với id này.");
        }
      }

      function updateProduct() {
        let id = +prompt("Mời bạn nhập id sản phẩm cần cập nhật:");
        let index = products.findIndex((product) => product.id === id);
        if (index !== -1) {
          let name = prompt("Mời bạn nhập tên mới:");
          let price = +prompt("Mời bạn nhập giá mới:");
          let category = prompt("Mời bạn nhập danh mục mới:");
          let quantity = +prompt("Mời bạn nhập số lượng mới:");
          products[index] = { id, name, price, category, quantity };
          alert("Sản phẩm đã được cập nhật!");
        } else {
          alert("Không tìm thấy sản phẩm với id này.");
        }
      }

      function showProductDetails() {
        let id = +prompt("Mời bạn nhập id sản phẩm cần xem chi tiết:");
        let product = products.find((product) => product.id === id);
        if (product) {
          alert(
            `ID: ${product.id}\nTên: ${product.name}\nGiá: ${product.price}\nDanh mục: ${product.category}\nSố lượng: ${product.quantity}`
          );
        } else {
          alert("Không tìm thấy sản phẩm với id này.");
        }
      }

      function filterProductsByPrice() {
        let minPrice = +prompt("Mời bạn nhập giá tối thiểu:");
        let maxPrice = +prompt("Mời bạn nhập giá tối đa:");
        let filteredProducts = products.filter(
          (product) => product.price >= minPrice && product.price <= maxPrice
        );
        if (filteredProducts.length > 0) {
          alert(
            "Sản phẩm trong khoảng giá:\n" +
              filteredProducts
                .map(
                  (product) =>
                    `ID: ${product.id}, Tên: ${product.name}, Giá: ${product.price}, Danh mục: ${product.category}, Số lượng: ${product.quantity}`
                )
                .join("\n")
          );
        } else {
          alert("Không có sản phẩm nào trong khoảng giá này.");
        }
      }

      function showMenu() {
        return prompt(
          "Mời bạn nhập lựa chọn:\n1. Thêm sản phẩm mới.\n2. Xóa sản phẩm theo id.\n3. Cập nhật thông tin sản phẩm theo id.\n4. Xem chi tiết sản phẩm theo id.\n5. Lọc sản phẩm theo khoảng giá.\n6. Hiển thị tất cả sản phẩm.\n7. Thoát"
        );
      }

      function showProducts() {
        if (products.length > 0) {
          console.log(
            "Danh sách sản phẩm:\n" +
              products
                .map(
                  (product) =>
                    `ID: ${product.id}, Tên: ${product.name}, Giá: ${product.price}, Danh mục: ${product.category}, Số lượng: ${product.quantity}`
                )
                .join("\n")
          );
        } else {
          console.log("Danh sách sản phẩm hiện đang trống.");
        }
      }

      let chose;
      do {
        chose = showMenu();
        chose = parseInt(chose);

        switch (chose) {
          case 1:
            addProduct();
            break;
          case 2:
            deleteProduct();
            break;
          case 3:
            updateProduct();
            break;
          case 4:
            showProductDetails();
            break;
          case 5:
            filterProductsByPrice();
            break;
          case 6:
            showProducts();
            break;
          case 7:
            alert("Thoát");
            break;
          default:
            alert("Không hợp lệ. Mời chọn lại.");
        }
      } while (chose !== 7);
    </script>
  </body>
</html>
